{% extends 'empleados/base.html' %}
{% block content %}
<h4>Matrícula</h4>
<form method="get" class="row g-2 mb-3">
  <div class="col-md-3"><select class="form-control" name="establecimiento"><option value="">Establecimiento</option>{% for e in establecimientos %}<option value="{{e.id}}" {% if request.GET.establecimiento == e.id|stringformat:'s' %}selected{% endif %}>{{e.nombre}}</option>{% endfor %}</select></div>
  <div class="col-md-2"><select class="form-control" name="carrera"><option value="">Carrera</option>{% for c in carreras %}<option value="{{c.id}}" {% if request.GET.carrera == c.id|stringformat:'s' %}selected{% endif %}>{{c.nombre}}</option>{% endfor %}</select></div>
  <div class="col-md-2"><select class="form-control" name="grado"><option value="">Grado</option>{% for g in grados %}<option value="{{g.id}}" {% if request.GET.grado == g.id|stringformat:'s' %}selected{% endif %}>{{g.nombre}}</option>{% endfor %}</select></div>
  <div class="col-md-2"><input class="form-control" name="ciclo" placeholder="Ciclo" value="{{request.GET.ciclo}}"></div>
  <div class="col-md-2"><select class="form-control" name="estado"><option value="">Estado</option><option value="activo">Activo</option><option value="inactivo">Inactivo</option></select></div>
  <div class="col-md-1"><button class="btn btn-secondary w-100">Filtrar</button></div>
</form>
<form method="post" class="card card-body mb-3">{% csrf_token %}{{ form.as_p }}<button class="btn btn-primary">Matricular</button></form>
<table class="table table-striped bg-white"><thead><tr><th>Alumno</th><th>Grado</th><th>Ciclo</th><th>Estado</th></tr></thead><tbody>{% for m in matriculas %}<tr><td>{{m.alumno}}</td><td>{{m.grado}}</td><td>{{m.ciclo}}</td><td>{{m.activo|yesno:'Activo,Inactivo'}}</td></tr>{% empty %}<tr><td colspan="4">Sin matrículas.</td></tr>{% endfor %}</tbody></table>
{% endblock %}
